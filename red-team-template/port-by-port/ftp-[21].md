# FTP [21]

Set Temporary Variables

```
ip=<VictimIP>
```

## FTP Banner Grabbing

```
echo bye | ftp -4nv $ip > ftp_-4nv.txt
```

## FTP Loging

### Anonymous Login

<mark style="color:yellow;">**NB!**</mark>
* if login is successful but files cannot be listed, try the "-p" flag to enable passive mode.
* Press "enter" when prompted for "Password:"

```
$ ftp $ip
Name (10.10.10.?:root): anonymous
331 Anonymous access allowed, send identity (e-mail name) as password.
Password:
230 User logged in.
Remote system type is Windows_NT.
ftp>
```

### Brute Force

<mark style="color:yellow;">**NB!**</mark>

* Don't forget to first try the typical credentials like $user:$user and the same dictionary for -L and -P
* Try to find valid users in other services ( SMTP | POP3 | IMAP | etc... )

#### Syntax

 <mark style="color:green;"> **hydra</mark> <mark style="color:yellow;">[-l|-L] username|users.txt [-p|-P] password|passwords.txt $ip</mark> <mark style="color:green;">ftp**</mark>

Where:

* <mark style="color:orange;">-l</mark>        → to use a single user name
* <mark style="color:orange;">-L</mark>        → to use a file with a list of user names
* <mark style="color:orange;">-p</mark>        → to use a single password
* <mark style="color:orange;">-P</mark>        → to use a file with a list of passwords

## If Login Successful

### Can I upload files?

Create any file to use for the upload test

```
echo "testing" > file.txt
```
After logging in, try to upload the file

```
ftp> put file.txt
```

#### I Can upload files!... Can I Exploit it?

For example, one form of exploitation could be, if this capability is provided in combination with a web server and if the file can be uploaded to a web-accessible path, to upload a web shell executable by the server (e.g. a web shell in ASP.NET, if the website supports it).

### Can I read files?

#### Mount FTP to local folder

Create the folder where it will be mounted

```
mkdir /mnt/ftpmounted
```

Mount with CurlFtpFS

```
curlftpfs <fpt_user>:<ftp_password>@$ip /mnt/ftpmounted
```

#### Copy the entire FTP to local

Recursively copy the entire FTP to the local folder

```
wget -r ftp://<fpt_user>:<ftp_password>@$ip
```

E.g.

```
wget -r ftp://anonymous:password@$ip
```

### Anything Interesting in the Found Files?

A File Analysis can provide interesting information about the victim and even credentials.

Here are some tips on File [Analysis procedures](#file-analysis).
Nueva linea
